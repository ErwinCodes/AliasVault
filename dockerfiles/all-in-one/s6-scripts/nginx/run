#!/command/with-contenv bash

# Get verbosity level (0=minimal, 1=normal, 2=verbose)
VERBOSITY="${ALIASVAULT_VERBOSITY:-0}"

echo "Starting Nginx reverse proxy (HTTP-only mode)..."

# Set nginx error log level based on verbosity
if [ "$VERBOSITY" -ge 2 ]; then
    # Verbose: info level
    exec nginx -g "daemon off; error_log /dev/stderr info;"
elif [ "$VERBOSITY" -ge 1 ]; then
    # Normal: warn level
    exec nginx -g "daemon off; error_log /dev/stderr warn;"
else
    # Minimal: error level only
    exec nginx -g "daemon off; error_log /dev/stderr error;"
fi